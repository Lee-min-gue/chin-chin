# 친친 (ChinChin) - AI 협업 개발 프로젝트 포트폴리오

## 프로젝트 개요

| 항목 | 내용 |
|------|------|
| **프로젝트명** | 친친 (ChinChin) - 블라인드 소개팅 웹 서비스 |
| **개발 기간** | 2026.02.03 ~ 2026.02.07 (5일) |
| **개발 인원** | 1인 (AI 협업 개발) |
| **역할** | 기획, 설계, 개발, 배포 전체 |
| **배포 상태** | MVP 배포 완료 (Vercel) |
| **코드 규모** | TypeScript 63개 파일 / 약 7,940줄 |

---

## 서비스 소개

**친친**은 인스타그램 스토리를 통해 친구를 소개하는 블라인드 소개팅 웹 서비스입니다.

기존 데이팅 앱의 문제점인 "낯선 사람과의 매칭"을 해결하기 위해, **친구(주선자)가 보증하는 신뢰 기반 매칭** 방식을 채택했습니다. 주선자가 친구의 블라인드 프로필 링크를 생성하여 SNS에 공유하면, 관심 있는 사람이 익명 채팅을 시작하고, 서로 마음에 들면 프로필을 공개하여 실제 연결로 이어집니다.

### 핵심 가치

- **Zero Friction** - 앱 설치 없이 웹 링크 클릭만으로 이용
- **Trust-based** - 친구가 보증하는 신뢰 기반 매칭
- **Personality First** - 외모가 아닌 대화를 통해 먼저 알아가는 블라인드 매칭
- **Viral by Design** - 인스타 스토리 공유를 통한 자연스러운 바이럴 확산

---

## 기술 스택

| 분류 | 기술 | 선택 이유 |
|------|------|-----------|
| **Frontend** | Next.js 16 (App Router) | SSR/SSG, 파일 기반 라우팅, React Server Components |
| **Language** | TypeScript (strict) | 타입 안전성, 개발 생산성 향상 |
| **Styling** | Tailwind CSS + shadcn/ui | 빠른 UI 개발, 일관된 디자인 시스템 |
| **Animation** | Framer Motion | 부드러운 UI 전환, 사용자 경험 향상 |
| **Backend** | Supabase | PostgreSQL + Auth + Storage + Realtime 통합 BaaS |
| **Auth** | Kakao OAuth 2.0 | 한국 사용자 타겟, 높은 보급률 |
| **Realtime** | Supabase Realtime | WebSocket 기반 실시간 채팅 및 알림 |
| **이미지 처리** | Sharp.js | 서버사이드 이미지 블러 처리 (프라이버시 보호) |
| **Deployment** | Vercel | Edge Network, Preview 배포, Git 연동 |

---

## 주요 기능

### 1. 카카오 로그인 (Custom OAuth)
Supabase의 기본 OAuth가 아닌, **서버사이드 Admin API를 활용한 커스텀 인증 플로우**를 직접 구현했습니다.

```
사용자 → 카카오 인증 → Authorization Code 수신
→ 서버에서 토큰 교환 → 사용자 정보 조회
→ Supabase Auth 유저 생성/조회 → Magic Link + OTP 검증
→ 세션 쿠키 설정 → 리다이렉트
```

**기술적 도전**: 클라이언트 사이드 `onAuthStateChange` 방식에서 무한 로딩 버그가 발생하여, 서버사이드 API Route 방식으로 전환하여 해결했습니다.

### 2. 블라인드 프로필 시스템
- **3단계 프로필 생성** (사진 → 기본정보 → 취향)
- **Sharp.js 서버사이드 블러 처리** - 원본 사진을 서버에서 블러 처리하여 프라이버시 보호
- **nanoid(8) 기반 단축 링크** - `chinchin.app/m/a1b2c3d4` 형태의 공유 링크
- **24시간 자동 만료** - 카운트다운 타이머 표시

### 3. 실시간 익명 채팅
- **Supabase Realtime** 기반 WebSocket 양방향 통신
- **48시간 제한 채팅** - 시간 내 프로필 공개 유도
- **읽음 표시** 및 실시간 메시지 전달
- **프로필 공개 요청/수락** 플로우 - 양측 합의 시 실제 프로필 공개
- **공개 후 대화 주제 제안** - 취향 기반 3가지 대화 주제 자동 생성

### 4. 주선자 대시보드
- 생성한 프로필 링크 관리 (활성/만료 분류)
- **매칭률** 통계 (핑크 하트 아이콘 UI)
- 조회수, 대화 신청 수 추적
- 프로필 링크 삭제 기능

### 5. 인앱 알림 시스템
- **Supabase Realtime 구독** 기반 실시간 알림
- 헤더 벨 아이콘 + 미읽은 알림 배지
- 알림 유형: 대화 신청, 수락/거절, 프로필 공개, 새 메시지

### 6. 보안 및 안정성
- **Rate Limiting** - 인증 콜백 IP 기반 분당 10회 제한
- **RLS (Row Level Security)** - 모든 테이블에 행 단위 접근 제어
- **글로벌 Error Boundary** - 에러 발생 시 사용자 친화적 복구 UI
- **신고/차단** 시스템 - 악용 방지

---

## 데이터베이스 설계

```
users ─────────┐
  │             │
  ├── profiles  │  (1:N) 사용자가 여러 프로필 링크 생성
  │     │       │
  │     └── chat_rooms (N:1) 프로필에서 채팅방 생성
  │           │
  │           └── messages (1:N) 채팅방 내 메시지
  │
  ├── notifications (1:N) 실시간 알림
  ├── reports      (N:M) 신고
  └── blocks       (N:M) 차단
```

**7개 테이블** | PostgreSQL + Supabase RLS 정책으로 보안 강화

---

## AI 협업 개발 프로세스

### 개발 방법론

이 프로젝트는 **Claude Code (AI 코딩 에이전트)**와의 협업으로 개발되었습니다. 1인 개발이지만 AI를 "페어 프로그래밍 파트너"로 활용하여 5일 만에 풀스택 MVP를 완성했습니다.

### 개발 흐름

```
기획 (PRD 작성)
  ↓
AI에게 PRD 전달 → 구현 계획서 자동 생성
  ↓
Phase별 구현 (AI가 코드 작성 → 리뷰 → 수정 반복)
  ↓
빌드 검증 → Vercel 배포
  ↓
문서 업데이트 (로컬 + Notion 자동 동기화)
```

### Phase별 개발 과정

| Phase | 내용 | 주요 작업 |
|-------|------|-----------|
| **Phase 1** | 프로젝트 기반 구축 | Next.js 스캐폴딩, Supabase 연동, 카카오 OAuth |
| **Phase 2** | 프로필 시스템 | 3단계 프로필 생성, 이미지 블러, 단축 링크, OG 이미지 |
| **Phase 3** | 채팅 시스템 | 실시간 채팅, 프로필 공개, 대화 신청/수락 |
| **Phase 4** | 대시보드 고도화 | 신고/차단, 알림 센터, 통계 |
| **Phase 5** | UI/UX 폴리싱 | 랜딩페이지, 디자인 시스템, 인스타 공유 UX |
| **Phase 6** | 보안 및 품질 | Rate Limiting, Error Boundary, 이미지 최적화, 코드 정리 |

### AI 활용 전략

#### 효과적이었던 점
- **PRD 기반 구현 계획 자동 생성** - 1,290줄 PRD에서 체계적인 구현 계획서 도출
- **멀티 파일 동시 수정** - 기능 하나에 연관된 여러 파일을 일관되게 수정
- **반복 작업 자동화** - Supabase RLS 정책, 타입 정의, API 라우트 등 보일러플레이트 코드 생성
- **문서-코드 동기화** - 코드 변경 시 PRD, 구현 계획서, Notion 문서 자동 업데이트
- **TodoWrite 기반 작업 관리** - 복잡한 멀티스텝 작업을 체계적으로 추적

#### 내가 직접 판단한 부분
- **서비스 기획 및 PRD 작성** - 비즈니스 로직과 사용자 경험 설계
- **아키텍처 결정** - 서버사이드 인증 방식 전환, 실시간 통신 방식 선택
- **디버깅 방향 제시** - AI가 잘못된 접근을 할 때 올바른 방향 교정
- **UI/UX 판단** - 디자인 감각과 사용자 관점의 피드백
- **배포 및 환경 설정** - Vercel, Supabase, 카카오 개발자 콘솔 설정

#### AI 협업에서 배운 교훈
1. **명확한 PRD가 AI 생산성의 핵심** - 요구사항이 명확할수록 AI의 코드 품질이 높아짐
2. **디버깅 시 전체 흐름 추적 우선** - AI가 바로 수정을 시도하기보다 전체 플로우를 먼저 파악하도록 유도해야 함
3. **환경 설정은 직접 관리** - .env, 배포 설정 등은 AI에게 맡기지 않고 직접 관리
4. **CLAUDE.md로 프로젝트 컨텍스트 유지** - 세션 간 맥락을 잃지 않도록 프로젝트 규칙 문서화
5. **Custom Skills로 반복 워크플로우 자동화** - `/deploy`, `/notion-update` 등 커스텀 명령어 구성

---

## 프로젝트 성과

### 정량적 성과
- **5일** 만에 풀스택 MVP 완성 및 배포
- **63개** TypeScript 파일, **약 7,940줄** 코드
- **7개** 데이터베이스 테이블, 완전한 RLS 정책
- **12회** 커밋, **19,519줄** 코드 추가
- **10개** 페이지 라우트, **6개** 핵심 기능 모듈

### 정성적 성과
- PRD부터 배포까지 전체 개발 라이프사이클 1인 수행
- 실시간 WebSocket 채팅, 커스텀 OAuth 등 복잡한 기능 구현
- 보안(RLS, Rate Limiting, Error Boundary)까지 고려한 프로덕션 레벨 코드
- AI 도구를 활용한 효율적인 개발 프로세스 구축

---

## 기술적 도전과 해결

### 1. 카카오 OAuth 무한 로딩 해결

**문제**: 클라이언트 사이드 `onAuthStateChange`로 Supabase 세션을 감지할 때 대시보드에서 무한 로딩 발생

**원인 분석**: Supabase의 기본 OAuth 프로바이더가 아닌 카카오를 커스텀으로 연동하면서, 클라이언트 사이드 이벤트 리스너와 서버 세션 사이의 타이밍 이슈 발생

**해결**: 서버사이드 API Route에서 Admin API로 직접 유저 생성 → Magic Link 생성 → OTP 검증 → 쿠키 설정하는 방식으로 전환. 클라이언트는 세션 쿠키만 읽으면 되므로 안정적인 인증 플로우 구현

### 2. 블라인드 프로필 이미지 처리

**문제**: 프로필 사진을 블러 처리하면서도 원본 보존 필요

**해결**: Sharp.js를 서버 사이드에서 사용하여 업로드 시 블러 이미지를 별도 생성. Next.js Image 컴포넌트의 `fill` + `sizes` + `priority` 속성으로 성능 최적화

### 3. 실시간 채팅 안정성

**문제**: Supabase Realtime 구독이 컴포넌트 언마운트 시 정리되지 않아 메모리 누수 발생

**해결**: `useEffect` cleanup 함수에서 채널 구독 해제, 채팅방 목록과 개별 채팅방의 구독을 분리하여 관리

---

## 페이지 구성

| 페이지 | 경로 | 설명 |
|--------|------|------|
| 랜딩 | `/` | 서비스 소개, CTA |
| 로그인 | `/login` | 카카오 소셜 로그인 |
| 프로필 생성 | `/create` | 3단계 프로필 작성 |
| 블라인드 프로필 | `/m/[shortId]` | 공유 링크로 접근하는 블라인드 프로필 |
| 대시보드 | `/dashboard` | 생성한 링크 관리, 통계 |
| 채팅 목록 | `/chat` | 진행 중인 채팅 목록 |
| 채팅방 | `/chat/[roomId]` | 실시간 1:1 채팅 |
| 알림 | `/notifications` | 알림 센터 |

---

## 향후 계획

- **Analytics 연동** - Vercel Analytics로 사용자 행동 분석
- **Push Notification** - 브라우저 푸시 알림
- **리워드 시스템** - 매칭 성공 시 주선자 보상
- **AI 매칭 추천** - 취향 데이터 기반 호환성 분석
- **성능 최적화** - 코드 스플리팅, 이미지 최적화 고도화

---

*이 프로젝트는 AI 코딩 도구(Claude Code)와의 협업으로 개발되었으며, 기획/설계/의사결정은 모두 직접 수행했습니다.*
